(function(){this.ec=this.ec||{}}).call(this),function(){var NodeTypes,ParameterMissing,Utils,defaults,__hasProp={}.hasOwnProperty;ParameterMissing=function(message){this.message=message},ParameterMissing.prototype=new Error,defaults={prefix:"",default_url_options:{}},NodeTypes={GROUP:1,CAT:2,SYMBOL:3,OR:4,STAR:5,LITERAL:6,SLASH:7,DOT:8},Utils={serialize:function(object,prefix){var element,i,key,prop,result,s,_i,_len;if(null==prefix&&(prefix=null),!object)return"";if(!prefix&&"object"!==this.get_object_type(object))throw new Error("Url parameters should be a javascript hash");if(window.jQuery)return result=window.jQuery.param(object),result?result:"";switch(s=[],this.get_object_type(object)){case"array":for(i=_i=0,_len=object.length;_len>_i;i=++_i)element=object[i],s.push(this.serialize(element,prefix+"[]"));break;case"object":for(key in object)__hasProp.call(object,key)&&(prop=object[key],null!=prop&&(null!=prefix&&(key=""+prefix+"["+key+"]"),s.push(this.serialize(prop,key))));break;default:object&&s.push(""+encodeURIComponent(prefix.toString())+"="+encodeURIComponent(object.toString()))}return s.length?s.join("&"):""},clean_path:function(path){var last_index;return path=path.split("://"),last_index=path.length-1,path[last_index]=path[last_index].replace(/\/+/g,"/"),path.join("://")},set_default_url_options:function(optional_parts,options){var i,part,_i,_len,_results;for(_results=[],i=_i=0,_len=optional_parts.length;_len>_i;i=++_i)part=optional_parts[i],!options.hasOwnProperty(part)&&defaults.default_url_options.hasOwnProperty(part)&&_results.push(options[part]=defaults.default_url_options[part]);return _results},extract_anchor:function(options){var anchor;return anchor="",options.hasOwnProperty("anchor")&&(anchor="#"+options.anchor,delete options.anchor),anchor},extract_options:function(number_of_params,args){var last_el;return last_el=args[args.length-1],args.length>number_of_params||null!=last_el&&"object"===this.get_object_type(last_el)&&!this.look_like_serialized_model(last_el)?args.pop():{}},look_like_serialized_model:function(object){return"id"in object||"to_param"in object},path_identifier:function(object){var property;return 0===object?"0":object?(property=object,"object"===this.get_object_type(object)&&(property="to_param"in object?object.to_param:"id"in object?object.id:object,"function"===this.get_object_type(property)&&(property=property.call(object))),property.toString()):""},clone:function(obj){var attr,copy,key;if(null==obj||"object"!==this.get_object_type(obj))return obj;copy=obj.constructor();for(key in obj)__hasProp.call(obj,key)&&(attr=obj[key],copy[key]=attr);return copy},prepare_parameters:function(required_parameters,actual_parameters,options){var i,result,val,_i,_len;for(result=this.clone(options)||{},i=_i=0,_len=required_parameters.length;_len>_i;i=++_i)val=required_parameters[i],i<actual_parameters.length&&(result[val]=actual_parameters[i]);return result},build_path:function(required_parameters,optional_parts,route,args){var anchor,opts,parameters,result,url,url_params;if(args=Array.prototype.slice.call(args),opts=this.extract_options(required_parameters.length,args),args.length>required_parameters.length)throw new Error("Too many parameters provided for path");return parameters=this.prepare_parameters(required_parameters,args,opts),this.set_default_url_options(optional_parts,parameters),anchor=this.extract_anchor(parameters),result=""+this.get_prefix()+this.visit(route,parameters),url=Utils.clean_path(""+result),(url_params=this.serialize(parameters)).length&&(url+="?"+url_params),url+=anchor},visit:function(route,parameters,optional){var left,left_part,right,right_part,type,value;switch(null==optional&&(optional=!1),type=route[0],left=route[1],right=route[2],type){case NodeTypes.GROUP:return this.visit(left,parameters,!0);case NodeTypes.STAR:return this.visit_globbing(left,parameters,!0);case NodeTypes.LITERAL:case NodeTypes.SLASH:case NodeTypes.DOT:return left;case NodeTypes.CAT:return left_part=this.visit(left,parameters,optional),right_part=this.visit(right,parameters,optional),!optional||left_part&&right_part?""+left_part+right_part:"";case NodeTypes.SYMBOL:if(value=parameters[left],null!=value)return delete parameters[left],this.path_identifier(value);if(optional)return"";throw new ParameterMissing("Route parameter missing: "+left);default:throw new Error("Unknown Rails node type")}},visit_globbing:function(route,parameters,optional){var left,right,type,value;return type=route[0],left=route[1],right=route[2],left.replace(/^\*/i,"")!==left&&(route[1]=left=left.replace(/^\*/i,"")),value=parameters[left],null==value?this.visit(route,parameters,optional):(parameters[left]=function(){switch(this.get_object_type(value)){case"array":return value.join("/");default:return value}}.call(this),this.visit(route,parameters,optional))},get_prefix:function(){var prefix;return prefix=defaults.prefix,""!==prefix&&(prefix=prefix.match("/$")?prefix:""+prefix+"/"),prefix},_classToTypeCache:null,_classToType:function(){var name,_i,_len,_ref;if(null!=this._classToTypeCache)return this._classToTypeCache;for(this._classToTypeCache={},_ref="Boolean Number String Function Array Date RegExp Object Error".split(" "),_i=0,_len=_ref.length;_len>_i;_i++)name=_ref[_i],this._classToTypeCache["[object "+name+"]"]=name.toLowerCase();return this._classToTypeCache},get_object_type:function(obj){return window.jQuery&&null!=window.jQuery.type?window.jQuery.type(obj):null==obj?""+obj:"object"==typeof obj||"function"==typeof obj?this._classToType()[Object.prototype.toString.call(obj)]||"object":typeof obj},namespace:function(root,namespaceString){var current,parts;return parts=namespaceString?namespaceString.split("."):[],parts.length?(current=parts.shift(),root[current]=root[current]||{},Utils.namespace(root[current],parts.join("."))):void 0}},Utils.namespace(window,"ec.routes"),window.ec.routes={accountMembershipPath:function(){return Utils.build_path([],["format"],[2,[2,[2,[2,[7,"/",!1],[6,"account",!1]],[7,"/",!1]],[6,"membership",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},accountReservationEventClinicsPath:function(){return Utils.build_path(["reservation_id"],["format"],[2,[2,[2,[2,[2,[2,[2,[2,[7,"/",!1],[6,"account",!1]],[7,"/",!1]],[6,"reservations",!1]],[7,"/",!1]],[3,"reservation_id",!1]],[7,"/",!1]],[6,"event_clinics",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},accountUpcomingBookingPath:function(){return Utils.build_path(["id"],["format"],[2,[2,[2,[2,[2,[2,[7,"/",!1],[6,"account",!1]],[7,"/",!1]],[6,"bookings",!1]],[7,"/",!1]],[3,"id",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},blogPostPath:function(){return Utils.build_path(["id"],["format"],[2,[2,[2,[2,[7,"/",!1],[6,"blog",!1]],[7,"/",!1]],[3,"id",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},blogPostsPath:function(){return Utils.build_path([],["format"],[2,[2,[7,"/",!1],[6,"blog",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},caseStudiesPath:function(){return Utils.build_path([],["format"],[2,[2,[7,"/",!1],[6,"case-studies",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},caseStudyPath:function(){return Utils.build_path(["id"],["format"],[2,[2,[2,[2,[7,"/",!1],[6,"case-studies",!1]],[7,"/",!1]],[3,"id",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},companiesPath:function(){return Utils.build_path([],["format"],[2,[2,[2,[2,[7,"/",!1],[6,"directories",!1]],[7,"/",!1]],[6,"suppliers",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},companyPath:function(){return Utils.build_path(["id"],["format"],[2,[2,[2,[2,[2,[2,[7,"/",!1],[6,"directories",!1]],[7,"/",!1]],[6,"suppliers",!1]],[7,"/",!1]],[3,"id",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},elearningPath:function(){return Utils.build_path(["id"],["format"],[2,[2,[2,[2,[2,[2,[7,"/",!1],[6,"training",!1]],[7,"/",!1]],[6,"elearning",!1]],[7,"/",!1]],[3,"id",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},eventPath:function(){return Utils.build_path(["id"],["format"],[2,[2,[2,[2,[7,"/",!1],[6,"events",!1]],[7,"/",!1]],[3,"id",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},eventsPath:function(){return Utils.build_path([],["format"],[2,[2,[7,"/",!1],[6,"events",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},grantRightAccountPath:function(){return Utils.build_path(["id"],["format"],[2,[2,[2,[2,[2,[2,[7,"/",!1],[6,"account",!1]],[7,"/",!1]],[6,"grant_right",!1]],[7,"/",!1]],[3,"id",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},pressReleasePath:function(){return Utils.build_path(["id"],["format"],[2,[2,[2,[2,[7,"/",!1],[6,"press-releases",!1]],[7,"/",!1]],[3,"id",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},pressReleasesPath:function(){return Utils.build_path([],["format"],[2,[2,[7,"/",!1],[6,"press-releases",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},removeAccountMembershipPath:function(){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",!1],[6,"account",!1]],[7,"/",!1]],[6,"membership",!1]],[7,"/",!1]],[6,"remove_account",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},reportPath:function(){return Utils.build_path(["id"],["format"],[2,[2,[2,[2,[7,"/",!1],[6,"reports",!1]],[7,"/",!1]],[3,"id",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},reportsPath:function(){return Utils.build_path([],["format"],[2,[2,[7,"/",!1],[6,"reports",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},reservationPath:function(){return Utils.build_path(["id"],["format"],[2,[2,[2,[2,[7,"/",!1],[6,"reservations",!1]],[7,"/",!1]],[3,"id",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},revokeRightAccountPath:function(){return Utils.build_path(["id"],["format"],[2,[2,[2,[2,[2,[2,[7,"/",!1],[6,"account",!1]],[7,"/",!1]],[6,"revoke_right",!1]],[7,"/",!1]],[3,"id",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},searchPath:function(){return Utils.build_path([],["format"],[2,[2,[7,"/",!1],[6,"search",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},sessionsAccountUpcomingBookingPath:function(){return Utils.build_path(["id"],["format"],[2,[2,[2,[2,[2,[2,[2,[2,[7,"/",!1],[6,"account",!1]],[7,"/",!1]],[6,"bookings",!1]],[7,"/",!1]],[3,"id",!1]],[7,"/",!1]],[6,"sessions",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},shortSignupPath:function(){return Utils.build_path([],["format"],[2,[2,[2,[2,[7,"/",!1],[6,"account",!1]],[7,"/",!1]],[6,"short-signup",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},trainingPath:function(){return Utils.build_path([],[],[2,[7,"/",!1],[6,"training",!1]],arguments)},trainingCoursePath:function(){return Utils.build_path(["id"],["format"],[2,[2,[2,[2,[2,[2,[7,"/",!1],[6,"training",!1]],[7,"/",!1]],[6,"courses",!1]],[7,"/",!1]],[3,"id",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},trainingCoursesPath:function(){return Utils.build_path([],["format"],[2,[2,[2,[2,[7,"/",!1],[6,"training",!1]],[7,"/",!1]],[6,"courses",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},transferOwnershipAccountMembershipPath:function(){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",!1],[6,"account",!1]],[7,"/",!1]],[6,"membership",!1]],[7,"/",!1]],[6,"transfer_ownership",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},updateContactSettingsAccountPath:function(){return Utils.build_path([],["format"],[2,[2,[2,[2,[7,"/",!1],[6,"account",!1]],[7,"/",!1]],[6,"contact",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)}},window.ec.routes.options=defaults}.call(this),function(){"use strict";this.ec.shims=this.ec.shims||{}}.call(this),function(){"use strict";this.ec.shims.preventFormSubmit=function(){$("form[search-input]").removeAttr("action")}}.call(this),function(){"use strict";this.ec.shims.setupLinks=function(){$("a:NOT([data-angular-link]):NOT([target])").attr("target","_self")}}.call(this),function(){"use strict";this.ec.shims.overrideYoutubeIframes=function(){$('iframe[src*="youtube"]').each(function(){function defineVideoBox(item){return $(item).hasClass("video-box")}var $video=$(this);0===_.filter($video.parents(),defineVideoBox).length&&$video.wrap('<div class="video-box"></div>')})}}.call(this),function(){"use strict";var Query=function(params,resource){this.params=params,this.params.page=1,this.collection=[],this.lastPage=!1,this.state="initial",this.resource=resource};Query.prototype.getMore=function(options){if("query"!==this.state){if(this.canQueryMore()){var promise;return this.params.page++,promise=this.get(),promise.then(options.onSuccess),promise}options.onSuccess&&options.onSuccess()}},Query.prototype.get=function(){var getResponse,self=this;return"query"!==this.state?(this.state="query",getResponse=this.resource.get(this.params,function(result){self.update(result),self.state=self.collection.length>0?"results":"no-results"},function(error){throw self.state="error",error}),getResponse.$promise):void 0},Query.prototype.update=function(result){this.lastPage=result.data.length<result.perPage-1,this.collection=this.collection.concat(result.data),this.count=result.count,this.perPage=result.perPage},Query.prototype.canQueryMore=function(){return this.lastPage===!1?!0:this.params.page<=this.lastPage},ec.models=ec.models||{},ec.models.Query=Query}(),function(){"use strict";var Filter=function(options){var filterData=options.data;_.assign(this,filterData),this.children=this.children||[],options.doNotAddClearingValue||this.children.unshift({name:"Any",slug:"all"}),this.applied=this.children[0].name,this.customUpdateFacets=options.updateFacets&&_.bind(options.updateFacets,this)};Filter.prototype.updateFacets=function(data){return this.customUpdateFacets?(this.customUpdateFacets(data,this.children),void 0):(_.forEach(this.children,function(child){var matchingFacet=_.find(data.children,function(newChild){return newChild.slug===child.slug});matchingFacet&&(child.count=matchingFacet.count)},this),void 0)},ec.models=ec.models||{},ec.models.Filter=Filter}(),function(){"use strict";angular.module("dsConfig",[]);var dsConfigModule=angular.module("dsConfig");dsConfigModule.constant("ecExport",window.ec||{})}(),function(){"use strict";angular.module("dsGoogleTagManager",[])}(),function(){"use strict";function GtmService($window){var vm=this;vm.push=function(data){try{if($window.dataLayer&&($window.dataLayer.push(data),$window.analytics_vars))for(var key in data)data.hasOwnProperty(key)&&(analytics_vars[key]=data[key])}catch(e){}}}angular.module("dsGoogleTagManager").service("GtmService",GtmService),GtmService.$inject=["$window"]}(),function(){"use strict";function gtmTrack(GtmService){return{restrict:"EA",scope:{eventType:"@gtmWatchEvent",category:"@gtmCategory",actionName:"@gtmActionName",label:"@gtmLabel"},link:function(scope,el){function pushToGTM(){GtmService.push({event:"ActionTriggered",Category:scope.category,EventType:scope.eventType,ActionName:scope.actionName,Label:scope.label})}$(el).on(scope.eventType,pushToGTM)}}}angular.module("dsGoogleTagManager").directive("gtmTrack",gtmTrack),gtmTrack.$inject=["GtmService"]}(),function(){"use strict";ec.meta=ec.meta||{},ec.meta.editorial=ec.meta.editorial||{},ec.meta.modelFacets=ec.meta.modelFacets||{},ec.meta.companies=ec.meta.companies||{},angular.module("ecMeta",[]).value("ecMeta",{editorial:ec.meta.editorial,modelFacets:ec.meta.modelFacets,companies:ec.meta.companies})}(),function(){"use strict";var module=angular.module("ecPreloader",[]);module.constant("_START_REQUEST_","_START_REQUEST_"),module.constant("_END_REQUEST_","_END_REQUEST_"),module.config(["$routeProvider","$httpProvider","_START_REQUEST_","_END_REQUEST_",function($routeProvider,$httpProvider,_START_REQUEST_,_END_REQUEST_){var $http,interceptor;interceptor=["$q","$injector",function($q,$injector){function success(response){return $http=$http||$injector.get("$http"),$http.pendingRequests.length<1&&(rootScope=rootScope||$injector.get("$rootScope"),rootScope.$broadcast(_END_REQUEST_)),response}function error(response){return $http=$http||$injector.get("$http"),$http.pendingRequests.length<1&&(rootScope=rootScope||$injector.get("$rootScope"),rootScope.$broadcast(_END_REQUEST_)),$q.reject(response)}var rootScope;return function(promise){return rootScope=rootScope||$injector.get("$rootScope"),promise.then(function(response){/GET/.test(response.config.method)&&rootScope.$broadcast(_START_REQUEST_)}),promise.then(success,error)}}],$httpProvider.responseInterceptors.push(interceptor)}]),module.directive("ecPreloader",["_START_REQUEST_","_END_REQUEST_",function(_START_REQUEST_,_END_REQUEST_){return{restrict:"A",replace:!0,templateUrl:"preloader.html",link:function(scope,element){element.hide(),scope.$on(_START_REQUEST_,function(){element.show()}),scope.$on(_END_REQUEST_,function(){element.hide()})}}}])}(),function(){"use strict";var module=angular.module("ecTagBars",[]);module.directive("tagBars",[function(){return{restrice:"EA",scope:{barsCss:"@"},link:function(scope,el){var oneUnit,bars=el.find(scope.barsCss),counts=[];0!==bars.length&&(bars.each(function(index,bar){counts.push($(bar).data("count"))}),oneUnit=100/Math.max.apply(null,counts),bars.each(function(index,bar){$(bar).css("width",counts[index]*oneUnit+"%")}))}}}])}(),angular.module("InfiniteScroll",["debounce"]),function(){"use strict";var module=angular.module("InfiniteScroll");module.directive("infiniteScroll",["$timeout","$window","debounce",function($timeout,$window,debounce){function link(scope,el){function debounceCallback(){var lastItemOffset;loadingMore||(loadingMore=!0,lastItemOffset=getLastItemOffset(),lastItemOffset>-1&&isBottomOfPage(lastItemOffset)?scope.loadMore({callback:function(){loadingMore=!1}}):loadingMore=!1)}function getLastItemOffset(){var items=el.find(triggerNode);return items.length>0?items.last().offset().top:-1}function isBottomOfPage(itemOffset){var windowOffset=wrappedWindow.scrollTop(),adjustedWindowOffset=windowOffset+sensitivity(windowOffset);return adjustedWindowOffset>itemOffset}function viewportHeight(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)}function sensitivity(windowOffset){var maxSensitivity=viewportHeight(),calulatedSensitivity=10*windowOffset/100;return maxSensitivity>calulatedSensitivity?maxSensitivity:calulatedSensitivity}function toggleScrollCallback(enabled){enabled?(wrappedWindow.on("scroll",scrollHandler),scrollHandler()):wrappedWindow.off("scroll",scrollHandler)}function cleanup(){watcher(),wrappedWindow.off("scroll",scrollHandler),loadingMore=!1}var watcher,scrollHandler,triggerNode=scope.triggerNode||".grid__item",wrappedWindow=angular.element($window),loadingMore=!1;scrollHandler=debounce(debounceCallback,20),watcher=scope.$watch(function(){return scope.enabled},toggleScrollCallback),scope.$on("$destroy",cleanup)}return{restrict:"A",scope:{loadMore:"&",sensitivity:"@",triggerNode:"@",enabled:"="},link:link}}])}.call(this),function(){"use strict";ec.shims.preventFormSubmit(),angular.module("Search",["ngRoute","ngResource","ngSanitize","templates","ecMeta","dsConfig","dsGoogleTagManager","InfiniteScroll"]).constant("searchConfig",{api:{all:{path:"/api/search/all",template:"list",defaultParams:{}},reports:{path:"/api/search/all",route:ec.routes.reportsPath({}),template:"list",defaultParams:{only:"Report"}},caseStudies:{path:"/api/search/case_studies",route:ec.routes.caseStudiesPath({}),template:"flyers",defaultParams:{only:"CaseStudy"}},blog:{path:"/api/search/all",route:ec.routes.blogPostsPath({}),template:"list",defaultParams:{only:"BlogPost"}},events:{path:"/api/search/all",route:ec.routes.eventsPath({}),template:"list",defaultParams:{only:"Event"}},training:{path:"/api/search/all",route:ec.routes.trainingPath({}),template:"list",defaultParams:{only:"TrainingCourse"}},supplierDirectory:{path:"/api/search/all",route:ec.routes.companiesPath({}),template:"list",defaultParams:{only:"Company"}},pressRelease:{path:"/api/search/all",route:ec.routes.pressReleasesPath({}),template:"list",defaultParams:{only:"PressRelease"}}}}).config(["$locationProvider",function($locationProvider){$locationProvider.html5Mode(!0).hashPrefix("!")}])}(),function(){"use strict";var module=angular.module("Search");module.directive("filterDropdown",["$filter",function($filter){return{restrict:"EA",replace:!0,scope:{meta:"=",listFilter:"@",filterFn:"&"},templateUrl:"modules/search/templates/filter_dropdown.html",link:function(scope,el){var dropdownFilter=!!scope.listFilter;scope.applyFilter=scope.filterFn(),dropdownFilter&&(el.find(".toggle-list__filter").show(),el.find(".toggle-list").addClass("-scroll")),scope.metaChildren=function(){return dropdownFilter?function(){return $filter("startsWith")(scope.meta.children,scope.predicate)}:function(){return scope.meta.children}}(),scope.applyOnClass=function(item){return{"-on":item.name===scope.meta.applied}}}}}])}(),function(){"use strict";var module=angular.module("Search");module.directive("searchInput",["$location","$timeout","$rootScope","navbarScopeService","search","uxResponder",function($location,$timeout,$rootScope,navbarScopeService,search,uxResponder){return{restrict:"EA",scope:{open:"@",reset:"&"},link:function(scope,el){var input=el.find("input"),navbar=el.closest(".navbar"),logo=navbar.find(".navbar-logo"),navbarToggle=navbar.find(".navbar-toggle"),searchGroup=el.closest(".navbar-group"),otherGroups=navbar.find(".navbar-group:not(.-search)"),open=scope.open,responder=uxResponder,NAVBAR_SEARCH_ON="-searching",FOCUS_CLASS="-focused",SEARCHING_CLASS="-search-enabled",enableSearching=function(){navbarScopeService.openNavbarScope&&navbarScopeService.openNavbarScope.hideMenu(),navbar.addClass(NAVBAR_SEARCH_ON),el.addClass(FOCUS_CLASS),searchGroup.addClass(SEARCHING_CLASS),otherGroups.addClass("-hidden"),responder.palm&&(logo.hide(),navbarToggle.hide()),open=!0,input[0]!==document.activeElement&&input.focus()},disableSearching=function(){navbar.removeClass(NAVBAR_SEARCH_ON),el.removeClass(FOCUS_CLASS),searchGroup.removeClass(SEARCHING_CLASS),otherGroups.removeClass("-hidden"),responder.palm&&(navbarToggle.show(),logo.show()),open=!1,input.blur()};input.on("focus",function(){open||(enableSearching(),search.focus(),scope.$apply())}),el.on("click",".search-bar__toggle",function(){return open?(disableSearching(),search.blur(),scope.$apply(),$timeout(function(){$rootScope.$broadcast("UX_EQUAL_HEIGHTS_UPDATE")},100)):(enableSearching(),search.focus(),scope.$apply()),!1}),scope.$watch(function(){return search.inputFocused},function(){!open&&search.inputFocused&&enableSearching(),open&&!search.inputFocused&&disableSearching()})}}}])}(),function(){"use strict";var search=angular.module("Search");search.controller("FilterCtrl",["$scope","filters","search","infiniteScroll","$location","ecExport",function($scope,filters,search,infiniteScroll,$location,ecExport){function updateLocation(params){params=angular.extend(angular.copy($location.search()),mergeEditorialMetadataParams(params)),infiniteScroll.enabled=!1,angular.forEach(params,function(val,key){val||delete params[key]}),$location.search(params)}function mergeEditorialMetadataParams(newParams){function getFilterRoot(string){return string&&string.split(":")[0]}function removeSameRoots(currentFilters,filterRoot){return _.remove(currentFilters,function(filter){return filter.indexOf(filterRoot)>-1}),currentFilters}function addFilter(filters,filter){return-1===filter.indexOf("all")&&filters.push(newFilter),filters}var currentFilters=angular.copy($location.search())[editorialKey]||[],newFilter=newParams[editorialKey];return currentFilters=_.isArray(currentFilters)?currentFilters:currentFilters.split(","),newFilter?(currentFilters=removeSameRoots(currentFilters,getFilterRoot(newFilter)),newFilter=addFilter(currentFilters,newFilter),newParams[editorialKey]=newFilter.join(","),newParams):newParams}var editorialKey="editorial_metadata";$scope.filters=filters.getFilters(),$scope.search=search,$scope.hideCaseStudiesFilter=function(filter){return"CaseStudy"===filter.slug&&!ecExport.account.hasAccessToCaseStudies},$scope.showFilter=function(filterName){var currentModel,models=$scope.filters.models;return currentModel=_.find(models.children,{name:models.applied}),!_.contains(currentModel.excludedInnerFilters,filterName)},$scope.applyFilter=function(filter,searchFilter){function clearingParamValue(filter,searchFilter){return searchFilter.param===editorialKey?[searchFilter.root,filter.slug].join(":"):!1}var params={};filter&&(params[searchFilter.param]="all"===filter.slug?clearingParamValue(filter,searchFilter):filter.slug,searchFilter.applied=filter.name,updateLocation(params))},$scope.pluralizeResultCount={1:"result",other:"results"}}])}(),function(){"use strict";var search=angular.module("Search");search.controller("ResultsCtrl",["$scope","$log","$location","search","infiniteScroll",function($scope,$log,$location,search,infiniteScroll){$scope.search=search,$scope.routes=ec.routes,$scope.showInitialMsg=!1,$scope.infiniteScroll=infiniteScroll,$scope.enableInfiniteScroll=function(){infiniteScroll.enabled=!0},$scope.hideInfiniteScrollControls=function(){return infiniteScroll.enabled||search.results.lastPage||$scope.showInitialMsg||"query"===search.results.state},$scope.hideResults=function(){return $scope.showInitialMsg},$scope.showErrorMsg=function(){return"error"===search.results.state},$scope.showNoResultsMsg=function(){return"no-results"===search.results.state},$scope.buildUrl=function(searchResult){var output;switch(searchResult.type){case"Report":output=ec.routes.reportPath({id:searchResult.to_param});break;case"Case Study":output=ec.routes.caseStudyPath({id:searchResult.to_param});break;case"Event":output=ec.routes.eventPath({id:searchResult.to_param});break;case"Training Course":output=ec.routes.trainingCoursePath({id:searchResult.to_param});break;case"Blog Post":output=ec.routes.blogPostPath({id:searchResult.to_param});break;case"Press Release":output=ec.routes.pressReleasePath({id:searchResult.to_param});break;case"Company":output=ec.routes.companyPath({id:searchResult.to_param});break;default:$log.warn("Could not find suitable pathname")}return output},$scope.createLabelModifierCSS=function(str){return"-"+angular.lowercase(str).replace(/ /g,"-")},$scope.$watch(function(){return $location.url()},function(){search.isSearchWithParams()?$scope.showInitialMsg=!1:search.isSearchURL()&&($scope.showInitialMsg=!0)})}])}(),function(){"use strict";var search=angular.module("Search");search.controller("SearchCtrl",["$scope","$location","$window","$timeout","search","filters","infiniteScroll","GtmService",function($scope,$location,$window,$timeout,search,filters,infiniteScroll,GtmService){function updateLocation(query){var params=_.isUndefined(query)?{}:angular.copy($location.search());infiniteScroll.enabled=!1,query?params.q=query:delete params.q,$location.search(params)}var pageTitle=angular.element("title");$scope.query=angular.copy($location.search()).q||"",$scope.search=search,$scope.submitQuery=function(query){updateLocation(query)},$scope.resetQuery=function(){$scope.query="",infiniteScroll.enabled=!1,search.resetResults(),$location.search({}),filters.resetFilters(),pageTitle.text(search.pageTitle())},$scope.$watch("search.inputFocused",function(newVal){newVal||(infiniteScroll.enabled=!1)}),search.isSearchURL()&&search.focus(),$scope.$on("$locationChangeSuccess",function(event,newRoute){function resetSearchState(){$scope.resetQuery(),pageTitle.text(search.pageTitle()),trackActivity()}function filter(){$scope.query=params.q,resource=search.checkParamsForCustomResource(params),search.query(params,resource).then(function(result){filters.updateFiltersCount(result.facets),filters.updateSelectedFilters(params),pageTitle.text(search.pageTitle()),trackActivity()})}function resetToInitialPage(){filters.resetFilters(),search.blur(),pageTitle.text(search.pageTitle())}function goToNewPage(){$window.location.reload()}function trackActivity(){GtmService.push({event:"PageViewPathChanged",PageViewPath:$location.url()})}var resource,params=angular.copy($location.search()),parser=document.createElement("a");parser.href=newRoute,search.isSearchURL()&&search.focus(),search.isSearchWithNoParams()?resetSearchState():search.isSearchWithParams()?filter():search.isInitialRoute(parser.pathname)?resetToInitialPage():search.isLeavingSearchRoute()&&goToNewPage()})}])}(),function(){"use strict";var module=angular.module("Search");module.factory("filters",["ecMeta",function(ecMeta){function createModelsFilter(){var models=[{name:"All",slug:"all",count:0,excludedInnerFilters:["Company"]},{name:"Research",slug:"Report",count:0,excludedInnerFilters:["Company"]},{name:"Case Studies",slug:"CaseStudy",count:0,excludedInnerFilters:[]},{name:"Blog",slug:"BlogPost",count:0,excludedInnerFilters:["Company"]},{name:"Events",slug:"Event",count:0,excludedInnerFilters:["Company"]},{name:"Training",slug:"TrainingCourse",count:0,excludedInnerFilters:["Company"]},{name:"Supplier Directory",slug:"Company",count:0,excludedInnerFilters:["Company"]},{name:"Press Release",slug:"PressRelease",count:0,excludedInnerFilters:["Company"]}],updateModelFacets=function(data,models){angular.forEach(models,function(model){data[model.slug]>-1&&(model.count=data[model.slug])}),models[0].count=0,angular.forEach(models,function(model){models[0].count+=model.count})};return{data:{name:"In",applied:"All",param:"only",children:models},updateFacets:updateModelFacets,doNotAddClearingValue:!0}}var service,Filter=ec.models.Filter,filters=angular.extend(ecMeta.editorial,{dates:{name:"Date",applied:"Any",param:"since",children:[{name:"One week",slug:"one-week"},{name:"One month",slug:"one-month"},{name:"One year",slug:"one-year"}]},companies:ecMeta.companies});_.forEach(filters,function(filter,key){filters[key]=new Filter({data:filter}),filters[key].updateFacets(filter),filters[key].root=key});var modelsFilter=createModelsFilter();filters.models=new Filter(modelsFilter),filters.models.updateFacets(ecMeta.modelFacets);var initialFiltersData=angular.copy(filters),paramsToArray=function(params){return params.editorial_metadata=params.editorial_metadata||"",params.editorial_metadata=_.isArray(params.editorial_metadata)?params.editorial_metadata:params.editorial_metadata.split(","),params.editorial_metadata=_.compact(params.editorial_metadata),params};return service={getFilters:function(){return filters},updateFiltersCount:function(facets){angular.forEach(facets,function(facet,key){filters[key]&&filters[key].updateFacets(facet)})},updateSelectedFilters:function(params){params=paramsToArray(params),angular.forEach(filters,function(filter){var selectedFilter;if(params[filter.param]){if("editorial_metadata"===filter.param){var editorialMetadataSlug=_.find(params.editorial_metadata,function(editorialMetadata){return editorialMetadata.indexOf(filter.root)>-1});selectedFilter=_.find(filter.children,{slug:editorialMetadataSlug})}else selectedFilter=_.find(filter.children,{slug:params[filter.param]});filter.applied=selectedFilter?selectedFilter.name:filter.children[0].name}})},resetFilters:function(){angular.forEach(angular.copy(initialFiltersData),function(initialFilter,key){filters[key]=initialFilter})}}}])}(),function(){"use strict";angular.module("Search").service("infiniteScroll",function(){this.enabled=!1})}(),function(){"use strict";angular.module("Search").service("search",["$resource","$location","$q","$rootScope","$window","searchConfig","ecExport",function($resource,$location,$q,$rootScope,$window,searchConfig,ecExport){function findAndSetInitialResource(api,apiName){if(resources[apiName]=$resource(api.path,{}),subscriberView){var routeRegex=api.route?new RegExp(api.route,"gi"):null;routeRegex&&routeRegex.test(currentPathParser.pathname)&&(initialResourceParams=api.defaultParams)}}var initialResourceParams={},initialTitle=angular.element("title").text(),currentPathParser=document.createElement("a");currentPathParser.href=$window.location.href;var defaultResource="all",template="list",Query=ec.models.Query,subscriberView=ecExport.account.hasAccessToCaseStudies,resources={};this.locationBeforeSearch=angular.copy($window.location.pathname),this.locationBeforeSearchParams=angular.copy($window.location.search),this.inputFocused=!1,this.results=new Query({},resources[defaultResource]),this.isContentIndexPage="all"!==defaultResource,this.template=template,this.currentSearch=function(){return angular.copy($location.search()).q},this.query=function(params,resource){return resource=resource||defaultResource,params=params||angular.copy($location.search()),this.results=new Query(params,resources[resource]),this.results.get()},this.queryMore=function(callback){return this.results.getMore({onSuccess:callback})},this.resetResults=function(){return this.results=new Query({},resources[defaultResource]),this.isContentIndexPage?this.results.get():void 0},this.focus=function(){this.inputFocused||(this.isSearchURL()||($location.path("/search/"),$location.search(initialResourceParams)),this.inputFocused=!0)},this.blur=function(){this.inputFocused&&(this.locationBeforeSearch&&($location.path("/"),$location.search(this.locationBeforeSearchParams.substring(1))),this.inputFocused=!1)},this.checkParamsForCustomResource=function(params){return"CaseStudy"===params.only?(this.template="flyers","caseStudies"):(this.template="list",void 0)},this.pageTitle=function(){var title=[];return this.isSearchWithParams()&&(this.results.params.q&&title.push('Find "'+this.results.params.q+'"'),this.results.params.only&&title.push('Section "'+this.results.params.only+'"'),this.results.params.editorial_metadata&&this.results.params.editorial_metadata.length>0&&title.push('Filters "'+this.results.params.editorial_metadata+'"'),this.results.params.since&&title.push('Since "'+this.results.params.since+'"'),title.push("Search","Econsultancy"),title=title.join(" | ")),this.isSearchWithNoParams()&&(title="Search | Econsultancy"),this.isInitialRoute($window.location.pathname)&&(title=initialTitle),title},this.isInitialRoute=function(route){return route===this.locationBeforeSearch},this.isLeavingSearchRoute=function(){return this.inputFocused===!0&&!this.isSearchURL()},this.isSearchURL=function(){return"/search/"===$location.path()||"/search"===$location.path()},this.isSearchWithParams=function(){return this.isSearchURL()&&!_.isEmpty($location.search())},this.isSearchWithNoParams=function(){return this.isSearchURL()&&_.isEmpty($location.search())},angular.forEach(searchConfig.api,findAndSetInitialResource),this.isSearchURL()&&(this.inputFocused=!0)}])}(),function(){"use strict";var module=angular.module("Search");module.filter("formatThousends",[function(){return function(input){return!angular.isNumber(input)||1e3>input?input:Math.floor(input/1e3)+"k+"}}])}(),function(){"use strict";var module=angular.module("Search");module.filter("startsWith",[function(){return function(list,keyword){return keyword?_.filter(list,function(item){var words=item.name.match(/[a-zA-Z0-9]+/g);return _.find(words,function(word){return 0===word.toLowerCase().indexOf(keyword.toLowerCase())})}):list}}])}(),window.AngularRailsTemplates||(window.AngularRailsTemplates=angular.module("templates",[])),window.AngularRailsTemplates.run(["$templateCache",function($templateCache){$templateCache.put("modules/search/templates/filter_dropdown.html",'<li class="filterbar-item -has-panel">\n  <section class="filterbar-panel">\n    <header class="toggle-list__filter" ng-show="listFilter">\n      <form class="search-bar">\n        <div class="search-bar__query">\n          <input type="search" placeholder="Search" ng-model="predicate">\n          <button type="submit" class="search-bar__btn btn">\n            <i class="flaticon stroke zoom-2"></i>\n          </button>\n        </div>\n      </form>\n    </header>\n    <ul class="toggle-list" ng-class="{ \'-scroll\': scrollDropdown }">\n      <li ng-repeat="item in metaChildren() track by item.name" class=\'toggle-list__item -direct\' ng-class="applyOnClass(item)">\n        <a\n          href=\'\'\n          ng-click="applyFilter(item, meta)">\n          {{ item.name }}\n          <span class="toggle-list__count" ng-if="item.count >= 0">\n          ({{ item.count | formatThousends }})\n          </span>\n        </a>\n      </li>\n    </ul>\n  </section>\n\n  <a class="filterbar-item__link" href="" ng-class="{ \'-dark\': listFilter }">\n    {{ meta.name }}\n    <em>{{ meta.applied }}</em>\n  </a>\n</li>\n')}]),function(){"use strict";angular.module("ecFormHelpers",["user","templates"])}(),function(){"use strict";function catchAutofill($timeout){function link(scope,el,attr,require){function checkPasswordField(value){return $timeout(function(){if(form.password){var passwordValue=el.parents("form").find("[type=password]").val(),modelValue=form.password.$viewValue;passwordValue&&passwordValue!==modelValue&&form.password.$setViewValue(passwordValue)}},50),value}var ctrl=require[0],form=require[1];$timeout(function(){el.val()&&ctrl.$setViewValue(el.val())},250),"email"===attr.name&&ctrl.$parsers.push(checkPasswordField)}var directive={require:["^ngModel","^form"],link:link};return directive}angular.module("ecFormHelpers").directive("catchAutofill",["$timeout",catchAutofill])}(),function(){"use strict";function errorNotify(){function link(scope,el,attr,form){var fields=attr.fields.replace(/\s/g,"").split(",");scope.isFocused=!1,angular.forEach(fields,function(field){scope.$on(field+".blur",function(){scope.isFocused=!1}),scope.$on(field+".focus",function(){scope.isFocused=!0})}),scope.anyInvalid=function(){var i=0,len=fields.length;for(i;len>i;i++)if(form[fields[i]].$invalid&&form[fields[i]].$dirty)return!0},scope.getErrorMsg=function(){var errors,text;return 1===fields.length&&(errors=form[fields[0]].$error),text=fields.length>1?"please fill in these fields":errors.pattern?"please enter a valid "+(attr.name||"value"):errors.minlength?"please enter at least "+attr.hintMinLength+" characters":errors.taken?"this email is already registered with Econsultancy":errors.notRegistered&&!errors.required?"this email is not registered with Econsultancy":"please fill in this field"},scope.isHint=function(){var errors=form[fields[0]].$error;return errors.minlength||errors.pattern}}var directive={templateUrl:"modules/form_helpers/templates/error_notify.html",replace:!0,scope:{},require:"^form",link:link};return directive}angular.module("ecFormHelpers").directive("errorNotify",errorNotify)}(),function(){"use strict";function focusEvent(){function link(scope,el,attr,ctrl){el.bind("focus",function(){scope.$broadcast(attr.name+".focus"),el.removeClass("ec-focus-lost"),scope.$$phase||scope.$apply()}),el.bind("blur",function(){scope.$broadcast(attr.name+".blur"),ctrl.$dirty=!0,ctrl.$pristine=!1,el.removeClass("ng-pristine"),el.addClass("ng-dirty"),el.addClass("ec-focus-lost"),scope.$apply()})}var directive={require:"^ngModel",link:link};return directive}angular.module("ecFormHelpers").directive("focusEvent",focusEvent)}();var intlData={countries:[{name:"Afghanistan",cca2:"af","calling-code":"93"},{name:"Albania",cca2:"al","calling-code":"355"},{name:"Algeria",cca2:"dz","calling-code":"213"},{name:"American Samoa",cca2:"as","calling-code":"1684"},{name:"Andorra",cca2:"ad","calling-code":"376"},{name:"Angola",cca2:"ao","calling-code":"244"},{name:"Anguilla",cca2:"ai","calling-code":"1264"},{name:"Antigua and Barbuda",cca2:"ag","calling-code":"1268"},{name:"Argentina",cca2:"ar","calling-code":"54"},{name:"Armenia",cca2:"am","calling-code":"374"},{name:"Aruba",cca2:"aw","calling-code":"297"},{name:"Australia",cca2:"au","calling-code":"61"},{name:"Austria",cca2:"at","calling-code":"43"},{name:"Azerbaijan",cca2:"az","calling-code":"994"},{name:"Bahamas",cca2:"bs","calling-code":"1242"},{name:"Bahrain",cca2:"bh","calling-code":"973"},{name:"Bangladesh",cca2:"bd","calling-code":"880"},{name:"Barbados",cca2:"bb","calling-code":"1246"},{name:"Belarus",cca2:"by","calling-code":"375"},{name:"Belgium",cca2:"be","calling-code":"32"},{name:"Belize",cca2:"bz","calling-code":"501"},{name:"Benin",cca2:"bj","calling-code":"229"},{name:"Bermuda",cca2:"bm","calling-code":"1441"},{name:"Bhutan",cca2:"bt","calling-code":"975"},{name:"Bolivia",cca2:"bo","calling-code":"591"},{name:"Bosnia and Herzegovina",cca2:"ba","calling-code":"387"},{name:"Botswana",cca2:"bw","calling-code":"267"},{name:"Brazil",cca2:"br","calling-code":"55"},{name:"Brunei Darussalam",cca2:"bn","calling-code":"673"},{name:"Bulgaria",cca2:"bg","calling-code":"359"},{name:"Burkina Faso",cca2:"bf","calling-code":"226"},{name:"Burundi",cca2:"bi","calling-code":"257"},{name:"Cambodia",cca2:"kh","calling-code":"855"},{name:"Cameroon",cca2:"cm","calling-code":"237"},{name:"Canada",cca2:"ca","calling-code":"1"},{name:"Cape Verde",cca2:"cv","calling-code":"238"},{name:"Cayman Islands",cca2:"ky","calling-code":"1345"},{name:"Central African Republic",cca2:"cf","calling-code":"236"},{name:"Chad",cca2:"td","calling-code":"235"},{name:"Chile",cca2:"cl","calling-code":"56"},{name:"China",cca2:"cn","calling-code":"86"},{name:"Colombia",cca2:"co","calling-code":"57"},{name:"Comoros",cca2:"km","calling-code":"269"},{name:"Congo (DRC)",cca2:"cd","calling-code":"243"},{name:"Congo (Republic)",cca2:"cg","calling-code":"242"},{name:"Cook Islands",cca2:"ck","calling-code":"682"},{name:"Costa Rica",cca2:"cr","calling-code":"506"},{name:"Côte d'Ivoire",cca2:"ci","calling-code":"225"},{name:"Croatia",cca2:"hr","calling-code":"385"},{name:"Cuba",cca2:"cu","calling-code":"53"},{name:"Cyprus",cca2:"cy","calling-code":"357"},{name:"Czech Republic",cca2:"cz","calling-code":"420"},{name:"Denmark",cca2:"dk","calling-code":"45"},{name:"Djibouti",cca2:"dj","calling-code":"253"},{name:"Dominica",cca2:"dm","calling-code":"1767"},{name:"Dominican Republic",cca2:"do","calling-code":"1809"},{name:"Ecuador",cca2:"ec","calling-code":"593"},{name:"Egypt",cca2:"eg","calling-code":"20"},{name:"El Salvador",cca2:"sv","calling-code":"503"},{name:"Equatorial Guinea",cca2:"gq","calling-code":"240"},{name:"Eritrea",cca2:"er","calling-code":"291"},{name:"Estonia",cca2:"ee","calling-code":"372"},{name:"Ethiopia",cca2:"et","calling-code":"251"},{name:"Faroe Islands",cca2:"fo","calling-code":"298"},{name:"Fiji",cca2:"fj","calling-code":"679"},{name:"Finland",cca2:"fi","calling-code":"358"},{name:"France",cca2:"fr","calling-code":"33"},{name:"French Polynesia",cca2:"pf","calling-code":"689"},{name:"Gabon",cca2:"ga","calling-code":"241"},{name:"Gambia",cca2:"gm","calling-code":"220"},{name:"Georgia",cca2:"ge","calling-code":"995"},{name:"Germany",cca2:"de","calling-code":"49"},{name:"Ghana",cca2:"gh","calling-code":"233"},{name:"Gibraltar",cca2:"gi","calling-code":"350"},{name:"Greece",cca2:"gr","calling-code":"30"},{name:"Greenland",cca2:"gl","calling-code":"299"},{name:"Grenada",cca2:"gd","calling-code":"1473"},{name:"Guadeloupe",cca2:"gp","calling-code":"590"},{name:"Guam",cca2:"gu","calling-code":"1671"},{name:"Guatemala",cca2:"gt","calling-code":"502"},{name:"Guernsey",cca2:"gg","calling-code":"44"},{name:"Guinea",cca2:"gn","calling-code":"224"},{name:"Guinea-Bissau",cca2:"gw","calling-code":"245"},{name:"Guyana",cca2:"gy","calling-code":"592"},{name:"Haiti",cca2:"ht","calling-code":"509"},{name:"Honduras",cca2:"hn","calling-code":"504"},{name:"Hong Kong",cca2:"hk","calling-code":"852"},{name:"Hungary",cca2:"hu","calling-code":"36"},{name:"Iceland",cca2:"is","calling-code":"354"},{name:"India",cca2:"in","calling-code":"91"},{name:"Indonesia",cca2:"id","calling-code":"62"},{name:"Iran",cca2:"ir","calling-code":"98"},{name:"Iraq",cca2:"iq","calling-code":"964"},{name:"Ireland",cca2:"ie","calling-code":"353"},{name:"Isle of Man",cca2:"im","calling-code":"44"},{name:"Israel",cca2:"il","calling-code":"972"},{name:"Italy",cca2:"it","calling-code":"39"},{name:"Jamaica",cca2:"jm","calling-code":"1876"},{name:"Japan",cca2:"jp","calling-code":"81"},{name:"Jersey",cca2:"je","calling-code":"44"},{name:"Jordan",cca2:"jo","calling-code":"962"},{name:"Kazakhstan",cca2:"kz","calling-code":"7"},{name:"Kenya",cca2:"ke","calling-code":"254"},{name:"Kiribati",cca2:"ki","calling-code":"686"},{name:"Kuwait",cca2:"kw","calling-code":"965"},{name:"Kyrgyzstan",cca2:"kg","calling-code":"996"},{name:"Laos",cca2:"la","calling-code":"856"},{name:"Latvia",cca2:"lv","calling-code":"371"},{name:"Lebanon",cca2:"lb","calling-code":"961"},{name:"Lesotho",cca2:"ls","calling-code":"266"},{name:"Liberia",cca2:"lr","calling-code":"231"},{name:"Libya",cca2:"ly","calling-code":"218"},{name:"Liechtenstein",cca2:"li","calling-code":"423"},{name:"Lithuania",cca2:"lt","calling-code":"370"},{name:"Luxembourg",cca2:"lu","calling-code":"352"},{name:"Macao",cca2:"mo","calling-code":"853"},{name:"Macedonia",cca2:"mk","calling-code":"389"},{name:"Madagascar",cca2:"mg","calling-code":"261"},{name:"Malawi",cca2:"mw","calling-code":"265"},{name:"Malaysia",cca2:"my","calling-code":"60"},{name:"Maldives",cca2:"mv","calling-code":"960"},{name:"Mali",cca2:"ml","calling-code":"223"},{name:"Malta",cca2:"mt","calling-code":"356"},{name:"Marshall Islands",cca2:"mh","calling-code":"692"},{name:"Martinique",cca2:"mq","calling-code":"596"},{name:"Mauritania",cca2:"mr","calling-code":"222"},{name:"Mauritius",cca2:"mu","calling-code":"230"},{name:"Mexico",cca2:"mx","calling-code":"52"},{name:"Micronesia",cca2:"fm","calling-code":"691"},{name:"Moldova",cca2:"md","calling-code":"373"},{name:"Monaco",cca2:"mc","calling-code":"377"},{name:"Mongolia",cca2:"mn","calling-code":"976"},{name:"Montenegro",cca2:"me","calling-code":"382"},{name:"Montserrat",cca2:"ms","calling-code":"1664"},{name:"Morocco",cca2:"ma","calling-code":"212"},{name:"Mozambique",cca2:"mz","calling-code":"258"},{name:"Myanmar (Burma)",cca2:"mm","calling-code":"95"},{name:"Namibia",cca2:"na","calling-code":"264"},{name:"Nauru",cca2:"nr","calling-code":"674"},{name:"Nepal",cca2:"np","calling-code":"977"},{name:"Netherlands",cca2:"nl","calling-code":"31"},{name:"New Caledonia",cca2:"nc","calling-code":"687"},{name:"New Zealand",cca2:"nz","calling-code":"64"},{name:"Nicaragua",cca2:"ni","calling-code":"505"},{name:"Niger",cca2:"ne","calling-code":"227"},{name:"Nigeria",cca2:"ng","calling-code":"234"},{name:"North Korea",cca2:"kp","calling-code":"850"},{name:"Norway",cca2:"no","calling-code":"47"},{name:"Oman",cca2:"om","calling-code":"968"},{name:"Pakistan",cca2:"pk","calling-code":"92"},{name:"Palau",cca2:"pw","calling-code":"680"},{name:"Palestinian Territory",cca2:"ps","calling-code":"970"},{name:"Panama",cca2:"pa","calling-code":"507"},{name:"Papua New Guinea",cca2:"pg","calling-code":"675"},{name:"Paraguay",cca2:"py","calling-code":"595"},{name:"Peru",cca2:"pe","calling-code":"51"},{name:"Philippines",cca2:"ph","calling-code":"63"},{name:"Poland",cca2:"pl","calling-code":"48"},{name:"Portugal",cca2:"pt","calling-code":"351"},{name:"Puerto Rico",cca2:"pr","calling-code":"1787"},{name:"Qatar",cca2:"qa","calling-code":"974"},{name:"Réunion",cca2:"re","calling-code":"262"},{name:"Romania",cca2:"ro","calling-code":"40"},{name:"Russian Federation",cca2:"ru","calling-code":"7"},{name:"Rwanda",cca2:"rw","calling-code":"250"},{name:"Saint Kitts and Nevis",cca2:"kn","calling-code":"1869"},{name:"Saint Lucia",cca2:"lc","calling-code":"1758"},{name:"Saint Vincent and the Grenadines",cca2:"vc","calling-code":"1784"},{name:"Samoa",cca2:"ws","calling-code":"685"},{name:"San Marino",cca2:"sm","calling-code":"378"},{name:"São Tomé and Príncipe",cca2:"st","calling-code":"239"},{name:"Saudi Arabia",cca2:"sa","calling-code":"966"},{name:"Senegal",cca2:"sn","calling-code":"221"},{name:"Serbia",cca2:"rs","calling-code":"381"},{name:"Seychelles",cca2:"sc","calling-code":"248"},{name:"Sierra Leone",cca2:"sl","calling-code":"232"},{name:"Singapore",cca2:"sg","calling-code":"65"},{name:"Slovakia",cca2:"sk","calling-code":"421"},{name:"Slovenia",cca2:"si","calling-code":"386"},{name:"Solomon Islands",cca2:"sb","calling-code":"677"},{name:"Somalia",cca2:"so","calling-code":"252"},{name:"South Africa",cca2:"za","calling-code":"27"},{name:"South Korea",cca2:"kr","calling-code":"82"},{name:"Spain",cca2:"es","calling-code":"34"},{name:"Sri Lanka",cca2:"lk","calling-code":"94"},{name:"Sudan",cca2:"sd","calling-code":"249"},{name:"Suriname",cca2:"sr","calling-code":"597"},{name:"Swaziland",cca2:"sz","calling-code":"268"},{name:"Sweden",cca2:"se","calling-code":"46"},{name:"Switzerland",cca2:"ch","calling-code":"41"},{name:"Syrian Arab Republic",cca2:"sy","calling-code":"963"},{name:"Taiwan, Province of China",cca2:"tw","calling-code":"886"},{name:"Tajikistan",cca2:"tj","calling-code":"992"},{name:"Tanzania",cca2:"tz","calling-code":"255"},{name:"Thailand",cca2:"th","calling-code":"66"},{name:"Timor-Leste",cca2:"tl","calling-code":"670"},{name:"Togo",cca2:"tg","calling-code":"228"},{name:"Tonga",cca2:"to","calling-code":"676"},{name:"Trinidad and Tobago",cca2:"tt","calling-code":"1868"},{name:"Tunisia",cca2:"tn","calling-code":"216"},{name:"Turkey",cca2:"tr","calling-code":"90"},{name:"Turkmenistan",cca2:"tm","calling-code":"993"},{name:"Turks and Caicos Islands",cca2:"tc","calling-code":"1649"},{name:"Tuvalu",cca2:"tv","calling-code":"688"},{name:"Uganda",cca2:"ug","calling-code":"256"},{name:"Ukraine",cca2:"ua","calling-code":"380"},{name:"United Arab Emirates",cca2:"ae","calling-code":"971"},{name:"United Kingdom",cca2:"gb","calling-code":"44"},{name:"United States",cca2:"us","calling-code":"1"},{name:"Uruguay",cca2:"uy","calling-code":"598"},{name:"Uzbekistan",cca2:"uz","calling-code":"998"},{name:"Vanuatu",cca2:"vu","calling-code":"678"},{name:"Vatican City",cca2:"va","calling-code":"379"},{name:"Venezuela",cca2:"ve","calling-code":"58"},{name:"Viet Nam",cca2:"vn","calling-code":"84"},{name:"Virgin Islands (British)",cca2:"vg","calling-code":"1284"},{name:"Virgin Islands (U.S.)",cca2:"vi","calling-code":"1340"},{name:"Western Sahara",cca2:"eh","calling-code":"212"},{name:"Yemen",cca2:"ye","calling-code":"967"},{name:"Zambia",cca2:"zm","calling-code":"260"},{name:"Zimbabwe",cca2:"zw","calling-code":"263"}],countryCodes:{1:["us","ca"],7:["ru","kz"],20:["eg"],27:["za"],30:["gr"],31:["nl"],32:["be"],33:["fr"],34:["es"],36:["hu"],39:["it"],40:["ro"],41:["ch"],43:["at"],44:["gb","gg","im","je"],45:["dk"],46:["se"],47:["no","sj"],48:["pl"],49:["de"],51:["pe"],52:["mx"],53:["cu"],54:["ar"],55:["br"],56:["cl"],57:["co"],58:["ve"],60:["my"],61:["au","cc","cx"],62:["id"],63:["ph"],64:["nz"],65:["sg"],66:["th"],81:["jp"],82:["kr"],84:["vn"],86:["cn"],90:["tr"],91:["in"],92:["pk"],93:["af"],94:["lk"],95:["mm"],98:["ir"],211:["ss"],212:["ma","eh"],213:["dz"],216:["tn"],218:["ly"],220:["gm"],221:["sn"],222:["mr"],223:["ml"],224:["gn"],225:["ci"],226:["bf"],227:["ne"],228:["tg"],229:["bj"],230:["mu"],231:["lr"],232:["sl"],233:["gh"],234:["ng"],235:["td"],236:["cf"],237:["cm"],238:["cv"],239:["st"],240:["gq"],241:["ga"],242:["cg"],243:["cd"],244:["ao"],245:["gw"],246:["io"],247:["ac"],248:["sc"],249:["sd"],250:["rw"],251:["et"],252:["so"],253:["dj"],254:["ke"],255:["tz"],256:["ug"],257:["bi"],258:["mz"],260:["zm"],261:["mg"],262:["re","yt"],263:["zw"],264:["na"],265:["mw"],266:["ls"],267:["bw"],268:["sz"],269:["km"],290:["sh"],291:["er"],297:["aw"],298:["fo"],299:["gl"],350:["gi"],351:["pt"],352:["lu"],353:["ie"],354:["is"],355:["al"],356:["mt"],357:["cy"],358:["fi","ax"],359:["bg"],370:["lt"],371:["lv"],372:["ee"],373:["md"],374:["am"],375:["by"],376:["ad"],377:["mc"],378:["sm"],379:["va"],380:["ua"],381:["rs"],382:["me"],385:["hr"],386:["si"],387:["ba"],389:["mk"],420:["cz"],421:["sk"],423:["li"],500:["fk"],501:["bz"],502:["gt"],503:["sv"],504:["hn"],505:["ni"],506:["cr"],507:["pa"],508:["pm"],509:["ht"],590:["gp","bl","mf"],591:["bo"],592:["gy"],593:["ec"],594:["gf"],595:["py"],596:["mq"],597:["sr"],598:["uy"],599:["cw","bq"],670:["tl"],672:["nf"],673:["bn"],674:["nr"],675:["pg"],676:["to"],677:["sb"],678:["vu"],679:["fj"],680:["pw"],681:["wf"],682:["ck"],683:["nu"],685:["ws"],686:["ki"],687:["nc"],688:["tv"],689:["pf"],690:["tk"],691:["fm"],692:["mh"],850:["kp"],852:["hk"],853:["mo"],855:["kh"],856:["la"],880:["bd"],886:["tw"],960:["mv"],961:["lb"],962:["jo"],963:["sy"],964:["iq"],965:["kw"],966:["sa"],967:["ye"],968:["om"],970:["ps"],971:["ae"],972:["il"],973:["bh"],974:["qa"],975:["bt"],976:["mn"],977:["np"],992:["tj"],993:["tm"],994:["az"],995:["ge"],996:["kg"],998:["uz"],1242:["bs"],1246:["bb"],1264:["ai"],1268:["ag"],1284:["vg"],1340:["vi"],1345:["ky"],1441:["bm"],1473:["gd"],1649:["tc"],1664:["ms"],1671:["gu"],1684:["as"],1758:["lc"],1767:["dm"],1784:["vc"],1787:["pr"],1809:["do"],1868:["tt"],1869:["kn"],1876:["jm"]}};!function($,window,document,undefined){function Plugin(element,options){this.element=element,this.options=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="intlTelInput",defaults={preferredCountries:["us","gb"],initialDialCode:!0,americaMode:!1,onlyCountries:[]};Plugin.prototype={init:function(){var that=this;if(this.options.onlyCountries.length>0){var newCountries=[],newCountryCodes={};$.each(this.options.onlyCountries,function(i,countryCode){var countryData=that._getCountryData(countryCode);if(countryData){newCountries.push(countryData);var callingCode=countryData["calling-code"];newCountryCodes[callingCode]?newCountryCodes[callingCode].push(countryCode):newCountryCodes[callingCode]=[countryCode]}}),intlData.countries=newCountries,intlData.countryCodes=newCountryCodes}var preferredCountries=[];$.each(this.options.preferredCountries,function(i,countryCode){var countryData=that._getCountryData(countryCode);countryData&&preferredCountries.push(countryData)}),this.defaultCountry=preferredCountries.length?preferredCountries[0]:intlData.countries[0],this.telInput=$(this.element),this.options.initialDialCode&&""===this.telInput.val()&&this.telInput.val("+"+this.defaultCountry["calling-code"]+" "),this.telInput.wrap($("<div>",{"class":"intl-tel-input"}));var flagsContainer=$("<div>",{"class":"flag-dropdown f16"}).insertBefore(this.telInput),selectedFlag=$("<div>",{"class":"selected-flag"}).appendTo(flagsContainer),firstCountry=this.defaultCountry.cca2;this.selectedFlagInner=$("<div>",{"class":"flag "+firstCountry}).appendTo(selectedFlag),$("<div>",{"class":"down-arrow"}).appendTo(this.selectedFlagInner),this.countryList=$("<ul>",{"class":"country-list hide"}).appendTo(flagsContainer),preferredCountries.length&&(this._appendListItems(preferredCountries,"preferred"),$("<li>",{"class":"divider"}).appendTo(this.countryList)),this._appendListItems(intlData.countries,""),this.countryListItems=this.countryList.children(".country"),this.countryListItems.first().addClass("active"),this.telInput.keydown(function(){return 0!==String.fromCharCode(event.keyCode).replace(/[A-z]/g,"").length}),this.telInput.keyup(function(){var countryCode,alreadySelected=!1,dialCode=that._getDialCode(that.telInput.val());if(dialCode){var countryCodes=intlData.countryCodes[dialCode];$.each(countryCodes,function(i,c){that.selectedFlagInner.hasClass(c)&&(alreadySelected=!0)}),countryCode=countryCodes[0]}else countryCode=that.defaultCountry.cca2;alreadySelected||that._selectFlag(countryCode)}),this.telInput.keyup(),selectedFlag.click(function(e){if(e.stopPropagation(),that.countryList.hasClass("hide")){that.countryListItems.removeClass("highlight");var activeListItem=that.countryList.children(".active").addClass("highlight");that.countryList.removeClass("hide"),that._scrollTo(activeListItem),$(document).bind("keydown.intlTelInput",function(e){if(38==e.which||40==e.which){var current=that.countryList.children(".highlight").first(),next=38==e.which?current.prev():current.next();next&&(next.hasClass("divider")&&(next=38==e.which?next.prev():next.next()),that.countryListItems.removeClass("highlight"),next.addClass("highlight"),that._scrollTo(next))}else if(13==e.which){var currentCountry=that.countryList.children(".highlight").first();currentCountry.length&&that._selectListItem(currentCountry)}else if(9==e.which||27==e.which)that._closeDropdown();else if(e.which>=97&&e.which<=122||e.which>=65&&e.which<=90){var letter=String.fromCharCode(e.which),countries=that.countryListItems.filter(function(){return $(this).text().charAt(0)==letter&&!$(this).hasClass("preferred")});if(countries.length){var listItem,highlightedCountry=countries.filter(".highlight").first();listItem=highlightedCountry&&highlightedCountry.next()&&highlightedCountry.next().text().charAt(0)==letter?highlightedCountry.next():countries.first(),that.countryListItems.removeClass("highlight"),listItem.addClass("highlight"),that._scrollTo(listItem)}}})}else that._closeDropdown()}),this.countryListItems.mouseover(function(){that.countryListItems.removeClass("highlight"),$(this).addClass("highlight")}),this.countryListItems.click(function(e){var listItem=$(e.currentTarget);that._selectListItem(listItem)}),$("html").click(function(e){$(e.target).closest(".country-list").length||that._closeDropdown()})},_getCountryData:function(countryCode){for(var i=0;i<intlData.countries.length;i++)if(intlData.countries[i].cca2==countryCode)return intlData.countries[i]},_selectFlag:function(countryCode){this.selectedFlagInner.attr("class","flag "+countryCode),this.countryListItems.removeClass("active");var listItem=this.countryListItems.children(".flag."+countryCode).parent();return listItem.addClass("active"),listItem},selectCountry:function(countryCode){if(!this.selectedFlagInner.hasClass(countryCode)){var listItem=this._selectFlag(countryCode),dialCode=listItem.attr("data-dial-code");this.telInput.val("+"+dialCode+" ")}},_selectListItem:function(listItem){var countryCode=listItem.attr("data-country-code");this.selectedFlagInner.attr("class","flag "+countryCode);var newNumber=this._updateNumber(this.telInput.val(),listItem.attr("data-dial-code"));this.telInput.val(newNumber),this._closeDropdown(),this.telInput.focus(),this.countryListItems.removeClass("active highlight"),listItem.addClass("active")},_closeDropdown:function(){this.countryList.addClass("hide"),$(document).unbind("keydown.intlTelInput")},_scrollTo:function(element){var container=this.countryList,containerHeight=container.height(),containerTop=container.offset().top,containerBottom=containerTop+containerHeight,elementHeight=element.outerHeight(),elementTop=element.offset().top,elementBottom=elementTop+elementHeight,newScrollTop=elementTop-containerTop+container.scrollTop();if(containerTop>elementTop)container.scrollTop(newScrollTop);else if(elementBottom>containerBottom){var heightDifference=containerHeight-elementHeight;container.scrollTop(newScrollTop-heightDifference)}},_updateNumber:function(inputVal,dialCode){var newNumber,prevDialCode="+"+this._getDialCode(inputVal),newDialCode="+"+dialCode;return prevDialCode.length>1?(newNumber=inputVal.replace(prevDialCode,newDialCode),inputVal==prevDialCode&&(newNumber+=" ")):newNumber=inputVal.length&&"+"!=inputVal.substr(0,1)?newDialCode+" "+inputVal.trim():newDialCode+" ",this.options.americaMode&&"+1 "==newNumber.substring(0,3)&&(newNumber=newNumber.substring(3)),newNumber},_getDialCode:function(inputVal){var firstPart=inputVal.trim().split(" ")[0];if("+"==firstPart.substring(0,1)||"00"==firstPart.substring(0,2))for(var dialCode=firstPart.replace(/\D|00/g,"").substring(0,4),i=dialCode.length;i>0;i--)if(dialCode=dialCode.substring(0,i),intlData.countryCodes[dialCode])return dialCode;return""},_appendListItems:function(countries,className){var tmp="";$.each(countries,function(i,c){tmp+="<li class='country "+className+"' data-dial-code='"+c["calling-code"]+"' data-country-code='"+c.cca2+"'>",tmp+="<div class='flag "+c.cca2+"'></div>",tmp+="<span class='country-name'>"+c.name+"</span>",tmp+="<span class='dial-code'>+"+c["calling-code"]+"</span>",tmp+="</li>"}),this.countryList.append(tmp)}},$.fn[pluginName]=function(options){var args=arguments;if(options===undefined||"object"==typeof options)return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))});if("string"==typeof options&&"_"!==options[0]&&"init"!==options){var returns;return this.each(function(){var instance=$.data(this,"plugin_"+pluginName);instance instanceof Plugin&&"function"==typeof instance[options]&&(returns=instance[options].apply(instance,Array.prototype.slice.call(args,1)))}),returns!==undefined?returns:this}}}(jQuery,window,document),function(){"use strict";function intlTelInput(config,intlTelInputData){var service={selectCountry:function(){angular.element("[name=phone]").intlTelInput("selectCountry",config.country)},init:function(){var phoneNode=angular.element("[name=phone]");phoneNode.on("click",function(){return!1}),phoneNode.intlTelInput({preferredCountries:["uk","us"]}),service.selectCountry()}};return config.country=config.country||"uk",intlTelInputData.countries[207]={name:"United Kingdom",cca2:"uk","calling-code":"44"},intlTelInputData.countryCodes["44"]=["uk","gg","im","je"],service}angular.module("ecFormHelpers").constant("intlTelInputData",intlData).factory("intlTelInput",["config","intlTelInputData",intlTelInput])}(),function(){"use strict";function isNotRegistered(user){function link(scope,el,attr,ctrl){function checkEmail(email){return user.isRegistered(email).success(function(userData){ctrl.$setValidity("notRegistered",userData.exists),user.setExists(userData.exists),user.setEmail(email)}),email}ctrl.$parsers.unshift(checkEmail),ctrl.$setValidity("notRegistered",null)}var directive={restrict:"EA",link:link,require:"?ngModel"};return directive}angular.module("ecFormHelpers").directive("isNotRegistered",["user",isNotRegistered])}(),function(){"use strict";function isRegistered(user){function link(scope,el,attr,ctrl){function checkEmail(email){return user.isRegistered(email).success(function(userData){ctrl.$setValidity("registered",!userData.exists),user.setExists(userData.exists),user.setEmail(email)}),email}ctrl.$parsers.unshift(checkEmail),ctrl.$setValidity("registered",!0)}var directive={restrict:"EA",link:link,require:"?ngModel"};return directive}angular.module("ecFormHelpers").directive("isRegistered",["user",isRegistered])}(),function(){"use strict";function placeholder(){function link(scope,el,attr,ctrl){function placehold(){el.css("color","#ccc"),el.val(attr.placeholder),formCtrl[attr.name].$invalid=!0}function unplacehold(){el.css("color",inputColor),el.val(""),isPassword&&el.prop("type","password")}var inputValue,isPassword,inputColor,ngModelCtrl,formCtrl;!Modernizr.input.placeholder&&ctrl[0]&&ctrl[1]&&(ngModelCtrl=ctrl[0],formCtrl=ctrl[1],inputColor=el.css("color"),isPassword="password"===attr.type,isPassword&&el.prop("type","text"),scope.$watch(attr.ngModel,function(val){inputValue=val||""}),el.bind("focus",function(){""===inputValue&&unplacehold()}),el.bind("blur",function(){""===el.val()&&(isPassword&&el.prop("type","text"),placehold())}),ngModelCtrl.$formatters.unshift(function(val){return val?val:(placehold(),inputValue="",attr.placeholder)}))}var directive={restrict:"EA",require:["?ngModel","?form"],link:link};return directive}angular.module("ecFormHelpers").directive("placeholder",placeholder)}(),function(){"use strict";function formHelperService($window,notify){function invalidateForm(form){form.$setDirty();for(var prop in form)form.hasOwnProperty(prop)&&"$"!==prop.charAt(0)&&form[prop].$invalid&&(form[prop].$dirty=!0);notify.show({message:"The form could not be submitted - please review the highlighted fields below.",type:"error"})}var service={setInvalid:invalidateForm};return service}angular.module("ecFormHelpers").factory("formHelperService",["$window","notify",formHelperService])}(),function(){"use strict";function notify($timeout){function show(obj){service.message=obj.message,service.type=obj.type,service.link=obj.link,service.click=obj.click,service.setAlertTimeout()}function setAlertTimeout(){switch(service.type){case"success":$timeout(function(){service.clear()},3e3);break;case"info":$timeout(function(){service.clear()},1e4);break;case"danger":}}function clear(){service.message=null,service.type=null,service.link=null}var service={message:null,type:null,types:["success","danger","info"],link:null,show:show,setAlertTimeout:setAlertTimeout,clear:clear};return service}angular.module("ecFormHelpers").factory("notify",["$timeout",notify])}(),window.AngularRailsTemplates||(window.AngularRailsTemplates=angular.module("templates",[])),window.AngularRailsTemplates.run(["$templateCache",function($templateCache){$templateCache.put("modules/form_helpers/templates/error_notify.html",'<span\n  class="input__error-message input__error-message--left"\n  ng-show="!isFocused && anyInvalid()"\n  ng-class="{ \'input__error-message--hint\': isFocused && isHint()  }">\n  {{ getErrorMsg() }}\n</span>\n')}]),function(){"use strict";angular.module("user",["ngCookies"])}(),function(){"use strict";function UserProvider(){function userFactory($location,$http,$cookies,$window,userParams){function setExists(exists){service.exists=exists}function setEmail(email){params.email.set(email)}function getExists(){return service.exists}function getEmail(){return params.email.get()}function getSingleSignOnToken(){return params.singleSignOnToken.get()}function getSector(){return params.sector.get()}function getCompanyKind(){return params.companyKind.get()}function getB2b(){return params.b2b.get()}function getShortSignupReturnUrl(){return params.singleSignOnToken.get()?ec.routes.shortSignupPath()+"?"+params.singleSignOnToken.key+"="+$window.escape(params.singleSignOnToken.get()):""}function storeUserParamsInSession(){angular.forEach(userParams.params,function(param){param.updateSessionFromQueryStringParam()})}function isRegistered(email){return $http({url:"/api/v1/account/exists",method:"GET",params:{email_address:email}})}var service={getEmail:getEmail,setEmail:setEmail,getExists:getExists,setExists:setExists,getSingleSignOnToken:getSingleSignOnToken,getSector:getSector,getCompanyKind:getCompanyKind,getB2b:getB2b,getShortSignupReturnUrl:getShortSignupReturnUrl,isRegistered:isRegistered,storeSession:useCookiesToRetainUserData},params=userParams.createParams(service.storeSession);return service.storeSession&&(service.storeUserParamsInSession=storeUserParamsInSession),service}var useCookiesToRetainUserData=!1;this.useCookiesToRetainUserData=function(value){useCookiesToRetainUserData=!!value},this.$get=["$location","$http","$cookies","$window","userParams",userFactory]}angular.module("user").provider("user",UserProvider)}(),function(){"use strict";angular.module("user").constant("userParamsConfig",{singleSignOnToken:"single-sign-on-token",email:"email-address",sector:"sector",companyKind:"company-kind",b2b:"b2b-focused"})}(),function(){"use strict";function userParamsService($location,$cookies,userParamsConfig){function createParams(store){var params={};return searchObject=$location.search(),_.forEach(userParamsConfig,function(value,key){params[key]=store?new StoredParam(value):new Param(value)}),params}function StoredParam(key){this.key=key,this.valueParam=searchObject[this.key],this.get=function(){return this.value||this.valueParam||$cookies[this.key]},this.set=function(value){$cookies[this.key]=value,this.value=value},this.updateSessionFromQueryStringParam=function(){this.valueParam&&($cookies[this.key]=this.valueParam)}}function Param(key){this.key=key,this.valueParam=searchObject[this.key],this.get=function(){return this.value||this.valueParam},this.set=function(value){this.value=value}}var searchObject,service={createParams:createParams};return service}angular.module("user").factory("userParams",["$location","$cookies","userParamsConfig",userParamsService])}(),function(){"use strict";angular.module("shortSignup",["ecFormHelpers","user","dsGoogleTagManager","dsConfig"]),angular.module("shortSignup").run(function($templateCache){$templateCache.put("truste_badge.html",'<div id="db098ade-0b9b-4e88-8397-087fd0f5a554"><script type="text/javascript" src="//privacy-policy.truste.com/privacy-seal/E-consultancy-com-Limited/asc?rid=db098ade-0b9b-4e88-8397-087fd0f5a554"></script><a href="//privacy.truste.com/privacy-seal/E-consultancy-com-Limited/validation?rid=94f370c5-0fd4-48fa-8cce-5d3a466c5014" title="TRUSTe online privacy certification" target="_blank"><img style="border: none" src="//privacy-policy.truste.com/privacy-seal/E-consultancy-com-Limited/seal?rid=94f370c5-0fd4-48fa-8cce-5d3a466c5014" alt="TRUSTe online privacy certification"/></a></div>')})}(),function(){"use strict";function shortSignupConfig($httpProvider,$locationProvider,config,userProvider){var $csrfToken=$('meta[name="csrf-token"]').attr("content");userProvider.useCookiesToRetainUserData(config.useCookiesToRetainUserData),$httpProvider.defaults.headers.post={"Content-Type":"application/x-www-form-urlencoded"},$httpProvider.defaults.headers.put={"Content-Type":"application/x-www-form-urlencoded"},$httpProvider.defaults.headers.common["X-CSRF-TOKEN"]=$csrfToken,$httpProvider.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",$httpProvider.defaults.headers.common.Accept="application/json",$locationProvider.html5Mode(!0)}angular.module("shortSignup").constant("config",ec.shortSignupConfig||{useCookiesToRetainUserData:!1}).config(["$httpProvider","$locationProvider","config","userProvider",shortSignupConfig])}(),function(){"use strict";function shortSignupRun(user){user.storeSession&&user.storeUserParamsInSession()}angular.module("shortSignup").run(["user",shortSignupRun])}(),function(){"use strict";function loginService($http,notify,user,shortSignupHelpers){function submit(onSuccess,formCtrl,formValues){var reqSetup;shortSignupHelpers.isFormInvalid(formCtrl)||(shortSignupHelpers.addToPost(formValues,"single-sign-on-token",user.getSingleSignOnToken()),reqSetup={method:"POST",url:"/login",data:$.param(formValues)},formCtrl.waitingOnAjax=!0,$http(reqSetup).then(function(result){onSuccess(result.data)}).catch(function(err){400===err.status?notify.show({message:"We were unable to log you in because the email address and password you provided are incorrect. Use the forgotten password link below if you cannot remember your login details.",type:"error"}):shortSignupHelpers.showInternalServerError(err)})["finally"](function(){formCtrl.waitingOnAjax=!1}))}var service={submit:_.curry(submit)};return service}angular.module("shortSignup").factory("loginService",["$http","notify","user","shortSignupHelpers",loginService])}(),function(){"use strict";function passwordResetService($http,notify,user,shortSignupHelpers){function submit(formCtrl,formValues){var reqSetup;shortSignupHelpers.isFormInvalid(formCtrl)||(shortSignupHelpers.addToPost(formValues,"single-sign-on-token",user.getSingleSignOnToken()),shortSignupHelpers.addToPost(formValues,"return_url",user.getShortSignupReturnUrl()),reqSetup={method:"POST",url:"/reset-password",data:$.param(formValues)},formCtrl.waitingOnAjax=!0,$http(reqSetup).then(function(){notify.show({message:"Password reset instructions sent. Please check your mail for further instructions.",type:"success"})}).catch(function(err){404===err.status?notify.show({message:"No user with that email address was found. Are you sure you are registered with that email address?",type:"error"}):shortSignupHelpers.showInternalServerError(err)})["finally"](function(){formCtrl.waitingOnAjax=!1}))}var service={submit:submit};return service}angular.module("shortSignup").factory("passwordResetService",["$http","notify","user","shortSignupHelpers",passwordResetService])}(),function(){"use strict";function shortSignupHelpers($window,formHelperService,notify){function internalErrorMessage(){return["We could not complete that request due to a fault on our end.","Please try again or contact us for assistance."].join(" ")}function addToPost(formObject,key,value){value&&(formObject[key]=value)}function isFormInvalid(form){return form.$invalid?(formHelperService.setInvalid(form),!0):!1}function showInternalServerError(err){$window.Rollbar&&Rollbar.error("Short Sign Up Invalid Response Error: status: "+err.status+" response data: "+err.data+" url: "+err.config.url+" method: "+err.config.method),notify.show({message:internalErrorMessage(),type:"error"})}var service={internalErrorMessage:internalErrorMessage,addToPost:addToPost,isFormInvalid:isFormInvalid,showInternalServerError:showInternalServerError};return service}angular.module("shortSignup").factory("shortSignupHelpers",["$window","formHelperService","notify",shortSignupHelpers])}(),function(){"use strict";function signupService($http,notify,user,shortSignupHelpers){function submit(onSuccess,formCtrl,formValues){var reqSetup;shortSignupHelpers.isFormInvalid(formCtrl)||(shortSignupHelpers.addToPost(formValues,"single-sign-on-token",user.getSingleSignOnToken()),reqSetup={method:"POST",url:ec.routes.shortSignupPath(),data:$.param(formValues)},formCtrl.waitingOnAjax=!0,$http(reqSetup).then(function(result){onSuccess(result.data)}).catch(function(err){422===err.status&&err.data.errors&&err.data.errors.length>0?notify.show({message:"The following errors prevented us from continuing: "+err.data.errors.join(", "),type:"error"}):shortSignupHelpers.showInternalServerError(err)})["finally"](function(){formCtrl.waitingOnAjax=!1}))}var service={submit:_.curry(submit)};return service}angular.module("shortSignup").factory("signupService",["$http","notify","user","shortSignupHelpers",signupService])}(),function(){"use strict";function LoginCtrl($scope,$window,loginService,user,notify){function defaultSuccessCallback(data){notify.show({message:"Log in successful, redirecting...",type:"success"}),$window.location.href=data.redirect_url}var vm=this,successFunction=$scope.localSignupSuccessCallback||defaultSuccessCallback;vm.submit=loginService.submit(successFunction),vm.notify=notify,vm.details={login_challenge_form:{email_address:user.getEmail()}},vm.notify.clear()}angular.module("shortSignup").controller("LoginCtrl",["$scope","$window","loginService","user","notify",LoginCtrl])}(),function(){"use strict";function PasswordResetCtrl($http,passwordResetService,notify,user){var vm=this;vm.submit=passwordResetService.submit,vm.email=user.getEmail(),vm.notify=notify,vm.notify.clear()}angular.module("shortSignup").controller("PasswordResetCtrl",["$http","passwordResetService","notify","user",PasswordResetCtrl])}(),function(){"use strict";function ShortSignupRoutesCtrl($scope,user,intlTelInput,$timeout,notify,$location){function setRoute(route){vm.route.current=route}function checkAgainstCurrentRoute(route){return function(){return vm.route.current===route}}function intlTelInputHandler(newVal){newVal&&$timeout(function(){intlTelInput.init()},100)}function isRegisteredUser(){var email=user.getEmail();email&&user.isRegistered(email).success(function(data){data.exists&&"login"!==vm.route&&vm.setRoute("login")})}var vm=this;vm.notify=notify,vm.route={current:"signup"},vm.inPasswordReset=checkAgainstCurrentRoute("passwordReset"),vm.inLogin=checkAgainstCurrentRoute("login"),vm.inSignup=checkAgainstCurrentRoute("signup"),vm.setRoute=setRoute,$scope.$watch(vm.inSignup,intlTelInputHandler),"/login"===$location.path()&&vm.setRoute("login"),isRegisteredUser()}angular.module("shortSignup").controller("ShortSignupRoutesCtrl",["$scope","user","intlTelInput","$timeout","notify","$location",ShortSignupRoutesCtrl])}(),function(){"use strict";function SignupCtrl($scope,$window,$timeout,signupService,user,notify,GtmService,ecExport){function withGoogleTagManager(successFn){return function(data){GtmService.push({event:"ActionTriggered",Category:"Short Signup",EventType:"submit",ActionName:"Processed",Label:"Successful conversion"}),successFn(data)}}function defaultSuccessCallback(data){notify.show({message:"Your account is being created, please wait...",type:"success"}),$timeout(function(){$window.location.href=data.redirect_url},1e3)}function userExistsWatch(exists){exists?vm.notify.show({message:"It seems you are already registered with Econsultancy. Follow the link below to log in and see your results.",type:"error",link:{text:"Log in now"},click:function(){$scope.shortSignupRoutes.setRoute("login")}}):exists||vm.notify.clear()}var vm=this,successFunction=$scope.localSignupSuccessCallback||defaultSuccessCallback;vm.submit=signupService.submit(withGoogleTagManager(successFunction)),vm.notify=notify,vm.account={email_address_primary:user.getEmail(),sector:user.getSector(),company_kind:user.getCompanyKind(),b2b_focused:user.getB2b(),postal_address_country_id:ecExport.guessed_country_id},vm.notify.clear(),$scope.$watch(user.getExists,userExistsWatch)}angular.module("shortSignup").controller("SignupCtrl",["$scope","$window","$timeout","signupService","user","notify","GtmService","ecExport",SignupCtrl])}(),function(){"use strict";var module=angular.module("ecTimeago",[]);module.constant("timeagoSettings",{allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}})}(),function(){"use strict";angular.module("ecTimeago").factory("timeagoService",["timeagoSettings",function(timeagoSettings){function inWords(date){function substitute(stringOrFunction,number){var string=angular.isFunction(stringOrFunction)?stringOrFunction(number,distanceMillis):stringOrFunction,value=format.numbers&&format.numbers[number]||number;return string.replace(/%d/i,value)}var distanceMillis=distance(date),format=settings.strings,prefix=format.prefixAgo,suffix=format.suffixAgo;settings.allowFuture&&(0>distanceMillis&&(prefix=format.prefixFromNow,suffix=format.suffixFromNow),distanceMillis=Math.abs(distanceMillis));var seconds=distanceMillis/1e3,minutes=seconds/60,hours=minutes/60,days=hours/24,years=days/365,words=45>seconds&&substitute(format.seconds,Math.round(seconds))||90>seconds&&substitute(format.minute,1)||45>minutes&&substitute(format.minutes,Math.round(minutes))||90>minutes&&substitute(format.hour,1)||24>hours&&substitute(format.hours,Math.round(hours))||48>hours&&substitute(format.day,1)||30>days&&substitute(format.days,Math.floor(days))||60>days&&substitute(format.month,1)||365>days&&substitute(format.months,Math.floor(days/30))||2>years&&substitute(format.year,1)||substitute(format.years,Math.floor(years));return $.trim([prefix,words,suffix].join(" "))}function parse(iso8601){var s=$.trim(iso8601);return s=s.replace(/\.\d\d\d+/,""),s=s.replace(/-/,"/").replace(/-/,"/"),s=s.replace(/T/," ").replace(/Z/," UTC"),s=s.replace(/([\+-]\d\d)\:?(\d\d)/," $1$2"),new Date(s)}function distance(date){return(new Date).getTime()-date.getTime()}var settings=timeagoSettings,service={fromString:function(string){return"string"==typeof string?inWords(parse(string)):void 0},fromDate:function(date){return date instanceof Date?inWords(date):void 0}};return service}])}(),function(){"use strict";var module=angular.module("ecTimeago");module.directive("ecTimeago",["timeagoService",function(timeagoService){return{restrict:"EA",link:function(scope,el){var text=el.text().trim();el.text(timeagoService.fromString(text))}}}])}(),function(){"use strict";var module=angular.module("ecJobSearchForm",[]);module.controller("JobSearchFormController",["$scope",function($scope){$scope.toKeywordParams=function(inputString){return inputString.replace(" ","+")},$scope.submit=function(){var location="http://jobs.econsultancy.com/searchjobs/?keywords="+this.toKeywordParams(this.jobSearchForm.keywords);window.location=location}}])}.call(this),function(){"use strict";var module=angular.module("ecPageBanner",[]);module.directive("pageBanner",["search",function(search){return{restrict:"EA",link:function(scope,el){scope.$watch(function(){return search.inputFocused},function(inputFocused){return inputFocused?el.hide():el.show()})}}}])}.call(this),function(){"use strict";var module=angular.module("ecMainNavigation",[]);module.controller("MainNavigationCtrl",["$scope","$location","search",function($scope,$location,search){$scope.showFullWidthSearch=search.isSearchURL(),$scope.showStandardSearch=!$scope.showFullWidthSearch}])}.call(this),function(){"use strict";angular.module("dsNewsletterSignup",[])}(),function(){"use strict";function newsletterSignupConfig($httpProvider){$httpProvider.defaults.headers.post={"Content-Type":"application/x-www-form-urlencoded"},$httpProvider.defaults.headers.put={"Content-Type":"application/x-www-form-urlencoded"}}angular.module("dsNewsletterSignup").config(["$httpProvider",newsletterSignupConfig])}(),function(){"use strict";function newsletterSignupCtrl($scope,$http,newsletterSignupService){$scope.formData={account:{subscribed_to_daily_pulse:"1"}},$scope.submit=function(event){$scope.saving=!0;var promise=newsletterSignupService.submit($scope.formData);promise.then(function(){$scope.message="Sign up successful",$scope.saving=!1},function(){$scope.errorMessage="An error occured",$scope.saving=!1}),event.preventDefault()}}angular.module("dsNewsletterSignup").controller("NewsletterSignupCtrl",["$scope","$http","newsletterSignupService",newsletterSignupCtrl])}(),function(){"use strict";function newsletterSignupService($http,$q){function submit(formData){var deferred=$q.defer();return $http({method:"PUT",url:ec.routes.updateContactSettingsAccountPath(),data:$.param(formData)}).success(function(data){deferred.resolve(data)}).error(function(data){deferred.resolve(data)}),deferred.promise}var service={submit:submit};return service}angular.module("dsNewsletterSignup").factory("newsletterSignupService",["$http","$q",newsletterSignupService])}(),function(){"use strict";angular.module("dsNavbar",["uxResponder","debounce"])}(),function(){"use strict";function navbarCssService(){var navbar={group:{selector:".navbar-group",modifier:{show:"-show",panelOpen:"-panel-open"}},toggle:{selector:".navbar-toggle",modifier:{on:"-on"}},toggleLink:{selector:".navbar-toggle a"},panel:{selector:".navbar-panel",modifier:{show:"-show"}},panelContents:{selector:".navbar-panel *"},pager:{selector:".navbar-pager",modifier:{show:"-show"}},pagerBackLink:{selector:".navbar-pager__back"},pagerTitle:{selector:".navbar-pager__title"},item:{selector:".navbar-item",modifier:{show:"-show",hidden:"-hidden"}},itemWithPanel:{selector:".navbar-item.-has-panel",modifier:{forceOpen:"-force-open"}},menuLinks:{selector:".navbar-item__link:not(.-direct), .toggle-list__item:not(.-direct)"},directLinks:{selector:".navbar-item__link.-direct, .toggle-list__item.-direct"},panelNav:{modifier:{hidden:"-hidden"}},tint:{selector:".navbar__tint",modifier:{show:"-show"}}},filterbar={group:{selector:".filterbar-group",modifier:{show:"-show",panelOpen:"-panel-open"}},toggle:{selector:".filterbar-toggle",modifier:{on:"-on"}},toggleLink:{selector:".filterbar-toggle a"},panel:{selector:".filterbar-panel",modifier:{show:"-show"}},pager:{selector:".filterbar-pager",modifier:{show:"-show"}},pagerBackLink:{selector:".filterbar-pager__back"},pagerTitle:{selector:".filterbar-pager__title"},item:{selector:".filterbar-item",modifier:{show:"-show",hidden:"-hidden"}},menuLinks:{selector:".filterbar-item__link:not(.-direct), .toggle-list__item:not(.-direct)"},directLinks:{selector:".filterbar-item__link.-direct, .toggle-list__item.-direct"},panelNav:{modifier:{hidden:"-hidden"}}};return{filterbar:filterbar,navbar:navbar}}angular.module("dsNavbar").factory("navbarCssService",navbarCssService)}(),function(){"use strict";function navbarHistoryService(){function panelHistory(panelCallback,resetCallback){function add(title,item){_history.unshift({title:title,item:item})}function back(panelCallback,resetCallback){_history.shift(),_history.length?panelCallback(_history[0]):(resetCallback(),_history=[])}function clear(){_history=[]}var _history=[];return{add:add,back:_.bind(back,null,panelCallback,resetCallback),clear:clear}}var service={history:panelHistory};return service}angular.module("dsNavbar").factory("navbarHistoryService",navbarHistoryService)}(),function(){"use strict";function navbarScopeService(){var service={openNavbarScope:null};return service}angular.module("dsNavbar").factory("navbarScopeService",navbarScopeService)}(),function(){"use strict";function anchorPanel(uxResponder,navbarCssService){function link(scope,itemEl){function anchorMorePanel(){var visibleItems=generalItemsEl.filter(":visible").length,columnsToShow=Math.min(3,3-visibleItems),$panel=itemEl.find(css.panel.selector);$panel.removeClass("-single -double -triple"),uxResponder.palm||(1>columnsToShow?$panel.addClass("-single"):1===columnsToShow?$panel.addClass("-double"):2===columnsToShow?$panel.addClass("-triple"):3===columnsToShow&&$panel.removeClass("-single -double -triple")),3>columnsToShow&&!uxResponder.palm?itemEl.addClass("-anchor-panel -right"):itemEl.removeClass("-anchor-panel -right"),columnsToShow>2||uxResponder.palm?morePanelNavsEl.removeClass(css.panelNav.modifier.hidden):1>columnsToShow?morePanelNavsEl.addClass(css.panelNav.modifier.hidden):morePanelNavsEl.addClass(css.panelNav.modifier.hidden).filter(":gt("+(2-Math.max(0,columnsToShow))+")").removeClass(css.panelNav.modifier.hidden),morePanelNavsEl.last().removeClass(css.panelNav.modifier.hidden)}var css=navbarCssService.navbar,navbarEl=itemEl.closest(".navbar"),generalItemsEl=navbarEl.find(".navbar-group.-general .navbar-item:not(.-more)"),morePanelNavsEl=itemEl.find(".navbar-panel-nav:lt(6)");scope.responder=uxResponder,scope.$watch("responder.width",function(){anchorMorePanel()})}var directive={link:link,restrict:"EA"};return directive}angular.module("dsNavbar").directive("anchorPanel",anchorPanel),anchorPanel.$inject=["uxResponder","navbarCssService"]}(),function(){"use strict";function navbar(uxResponder,navbarScopeService,navbarHistoryService,navbarCssService,$window,debounce){function link(scope,navbarEl){function inFilterBar(){return"filters"===scope.type}function forceOpen(e){$(e.target).parents(css.itemWithPanel.selector).addClass(css.itemWithPanel.modifier.forceOpen)}function removeForceOpen(e){$(e.target).parents(css.itemWithPanel.selector).removeClass(css.itemWithPanel.modifier.forceOpen)}function tintOn(){navbarEl.find(css.tint.selector).addClass(css.tint.modifier.show)}function tintOff(){navbarEl.find(css.tint.selector).removeClass(css.tint.modifier.show)}function setScrollHandler(){$($window).one("scroll",function(){$(css.itemWithPanel.selector).blur(),tintOff()})}function setClosePanelHandler(){var itemEl=$(this);itemEl.is(":focus")&&itemEl.one("click",function(){itemEl.blur()}),itemEl.siblings(css.itemWithPanel.selector).off("click")}function removeClosePanelHandler(){$(this).off("click")}function isLargeTouchDevice(){return!inFilterBar()&&Modernizr.touch&&!uxResponder.palm}function removeUrlsFromPanelItems(){groupEl.filter(function(){var thisEl=angular.element(this);return thisEl.hasClass("-account")||thisEl.hasClass("-login")?!1:!0}).find(css.directLinks.selector).add(css.menuLinks.selector).removeAttr("href")}function toggleMenuHandler(e){toggleMenu(),e.preventDefault()}function backLinkHandler(e){history.back(),e.preventDefault()}function linkHandler(){if(uxResponder.palm){var title,linkEl=$(this),itemEl=linkEl.closest(css.item.selector);return itemEl.hasClass(css.item.modifier.show)?(linkEl.on("click",directLinkHandler),void 0):(title=itemEl.find(css.menuLinks.selector).text(),showTitle(title),showPanel(itemEl),history.add(title,itemEl),!1)}}function directLinkHandler(e){uxResponder.palm&&($window.location.href=e.target.attributes["mobile-href"].value)}function showPanelAndTitle(panel){showTitle(panel.title),showPanel(panel.item)}function hidePanelAndTitle(){hidePanelTitle(),hidePanels()}function showTitle(title){pagerEl.addClass(css.pager.modifier.show),pagerEl.find(css.pagerTitle.selector).text(title)}function hidePanelTitle(){pagerEl.removeClass(css.pager.modifier.show),pagerEl.find(css.pagerTitle.selector).text("")}function showPanel(item){item.closest(css.group.selector).addClass(css.group.modifier.panelOpen),groupEl.find(css.item.selector).not(item).addClass(css.item.modifier.hidden),item.addClass(css.item.modifier.show),item.find(css.panel.selector).addClass(css.panel.modifier.show)}function hidePanels(){groupEl.removeClass(css.group.modifier.panelOpen),groupEl.find(css.item.selector).removeClass(css.item.modifier.hidden),groupEl.find(css.item.selector).removeClass(css.item.modifier.show),groupEl.find(css.panel.selector).removeClass(css.panel.modifier.show)}function showMenu(){scope.open=!0,navbarScopeService.openNavbarScope&&navbarScopeService.openNavbarScope.hideMenu(),navbarScopeService.openNavbarScope=scope,toggleEl.addClass(css.toggle.modifier.on),navbarEl.find(css.group.selector).addClass(css.group.modifier.show)}function hideMenu(){history.clear(),navbarScopeService.openNavbarScope=null,scope.open=!1,toggleEl.removeClass(css.toggle.modifier.on),navbarEl.find(css.group.selector).removeClass(css.group.modifier.show),hidePanelTitle(),hidePanels()}function toggleMenu(){return scope.open?hideMenu():showMenu()}var history=navbarHistoryService.history(showPanelAndTitle,hidePanelAndTitle),css=inFilterBar()?navbarCssService.filterbar:navbarCssService.navbar,groupEl=navbarEl.find(css.group.selector),toggleEl=navbarEl.find(css.toggle.selector),toggleLink=navbarEl.find(css.toggleLink.selector),pagerEl=navbarEl.find(css.pager.selector),pagerBackLinkEl=pagerEl.find(css.pagerBackLink.selector);scope.hideMenu=hideMenu,toggleLink.on("click",toggleMenuHandler),pagerBackLinkEl.on("click",backLinkHandler),groupEl.on("click",css.menuLinks.selector,linkHandler),groupEl.on("click",css.directLinks.selector,directLinkHandler),inFilterBar()||(groupEl.on("focusin",css.itemWithPanel.selector,debounce(function(){tintOn(),setScrollHandler()},50,!0)),groupEl.on("focusout",css.itemWithPanel.selector,debounce(tintOff,50,!0)),Modernizr.pointerevents||(groupEl.on("click",css.itemWithPanel.selector,setClosePanelHandler),groupEl.on("focusout",css.itemWithPanel.selector,removeClosePanelHandler)),groupEl.on("focusin",css.panelContents.selector,debounce(forceOpen,50,!0)),groupEl.on("focusout",css.panelContents.selector,debounce(removeForceOpen,50,!0))),isLargeTouchDevice()&&removeUrlsFromPanelItems(),angular.element("body").on("touchend",function(){angular.element(this).focus()})}var directive={link:link,restrict:"EA",scope:{type:"@"}};return directive}angular.module("dsNavbar").directive("navbar",navbar),navbar.$inject=["uxResponder","navbarScopeService","navbarHistoryService","navbarCssService","$window","debounce"]}();